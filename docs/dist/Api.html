<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>API | Naruse</title><meta name="description" content="支持react体系开发，多端统一，热更新的框架">
    <link rel="modulepreload" href="/naruse-doc/docs/dist/assets/app.4c4dae04.js"><link rel="modulepreload" href="/naruse-doc/docs/dist/assets/Api.html.10b0f052.js"><link rel="modulepreload" href="/naruse-doc/docs/dist/assets/Api.html.39dfae49.js">
    <link rel="stylesheet" href="/naruse-doc/docs/dist/assets/style.89956eba.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/naruse-doc/docs/dist/" class=""><img class="logo" src="https://s1.ax1x.com/2022/05/23/XSUGwj.png" alt="Naruse"><span class="site-name can-hide">Naruse</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/naruse-doc/docs/dist/入门.md" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/naruse-doc/docs/dist/API.md" class="" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/naruse-doc/docs/dist/入门.md" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/naruse-doc/docs/dist/API.md" class="" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/naruse-doc/docs/dist/" class="sidebar-item sidebar-heading" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a><!----></li><li><a href="/naruse-doc/docs/dist/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.html" class="sidebar-item sidebar-heading" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a><!----></li><li><a href="/naruse-doc/docs/dist/%E5%85%A5%E9%97%A8.html" class="sidebar-item sidebar-heading" aria-label="入门"><!--[--><!--]--> 入门 <!--[--><!--]--></a><!----></li><li><a href="/naruse-doc/docs/dist/%E5%85%B3%E4%BA%8EReact.html" class="sidebar-item sidebar-heading" aria-label="React语法"><!--[--><!--]--> React语法 <!--[--><!--]--></a><!----></li><li><a href="/naruse-doc/docs/dist/%E7%BB%84%E4%BB%B6%E5%BA%93.html" class="sidebar-item sidebar-heading" aria-label="组件库"><!--[--><!--]--> 组件库 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#基础" class="router-link-active router-link-exact-active sidebar-item" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#getsysteminfosync" class="router-link-active router-link-exact-active sidebar-item" aria-label="getSystemInfoSync()"><!--[--><!--]--> getSystemInfoSync() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#getsysteminfo-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="getSystemInfo(option)"><!--[--><!--]--> getSystemInfo(option) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#路由" class="router-link-active router-link-exact-active sidebar-item" aria-label="路由"><!--[--><!--]--> 路由 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#navigateto-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="navigateTo(option)"><!--[--><!--]--> navigateTo(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#navigateback-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="navigateBack(option)"><!--[--><!--]--> navigateBack(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#navigatetowebpage-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="navigateToWebPage(option)"><!--[--><!--]--> navigateToWebPage(option) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#设备" class="router-link-active router-link-exact-active sidebar-item" aria-label="设备"><!--[--><!--]--> 设备 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#setclipboarddata-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="setClipboardData(option)"><!--[--><!--]--> setClipboardData(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#getclipboarddata-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="getClipboardData(option)"><!--[--><!--]--> getClipboardData(option) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#数据缓存" class="router-link-active router-link-exact-active sidebar-item" aria-label="数据缓存"><!--[--><!--]--> 数据缓存 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#setstoragesync-key-data" class="router-link-active router-link-exact-active sidebar-item" aria-label="setStorageSync(key, data)"><!--[--><!--]--> setStorageSync(key, data) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#setstorage-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="setStorage(option)"><!--[--><!--]--> setStorage(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#getstoragesync-key" class="router-link-active router-link-exact-active sidebar-item" aria-label="getStorageSync(key)"><!--[--><!--]--> getStorageSync(key) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#getstorage-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="getStorage(option)"><!--[--><!--]--> getStorage(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#removestorage-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="removeStorage(option)"><!--[--><!--]--> removeStorage(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#removestoragesync-key" class="router-link-active router-link-exact-active sidebar-item" aria-label="removeStorageSync(key)"><!--[--><!--]--> removeStorageSync(key) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#getstorageinfo-option-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="getStorageInfo(option)"><!--[--><!--]--> getStorageInfo(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#clearstorage-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="clearStorage(option)"><!--[--><!--]--> clearStorage(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#clearstoragesync" class="router-link-active router-link-exact-active sidebar-item" aria-label="clearStorageSync()"><!--[--><!--]--> clearStorageSync() <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#dom" class="router-link-active router-link-exact-active sidebar-item" aria-label="DOM"><!--[--><!--]--> DOM <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#rendercomponentonpage-pageroute-t" class="router-link-active router-link-exact-active sidebar-item" aria-label="renderComponentOnPage(pageRoute,T)"><!--[--><!--]--> renderComponentOnPage(pageRoute,T) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#hoc-高阶函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="HOC（高阶函数）"><!--[--><!--]--> HOC（高阶函数） <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#wtihpage-t" class="router-link-active router-link-exact-active sidebar-item" aria-label="wtihPage(T)"><!--[--><!--]--> wtihPage(T) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#网络" class="router-link-active router-link-exact-active sidebar-item" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#爱用产品线专属api" class="router-link-active router-link-exact-active sidebar-item" aria-label="爱用产品线专属api"><!--[--><!--]--> 爱用产品线专属api <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#mapputils-工具类" class="router-link-active router-link-exact-active sidebar-item" aria-label="$mappUtils 工具类"><!--[--><!--]--> $mappUtils 工具类 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#mapputils-hidetabbar" class="router-link-active router-link-exact-active sidebar-item" aria-label="$mappUtils.hideTabBar()"><!--[--><!--]--> $mappUtils.hideTabBar() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#mapputils-showtabbar" class="router-link-active router-link-exact-active sidebar-item" aria-label="$mappUtils.showTabBar()"><!--[--><!--]--> $mappUtils.showTabBar() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#mapputils-getcurrentpagename" class="router-link-active router-link-exact-active sidebar-item" aria-label="$mappUtils.getCurrentPageName()"><!--[--><!--]--> $mappUtils.getCurrentPageName() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#mapputils-isios" class="router-link-active router-link-exact-active sidebar-item" aria-label="$mappUtils.isIOS()"><!--[--><!--]--> $mappUtils.isIOS() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#mapputils-isandroid" class="router-link-active router-link-exact-active sidebar-item" aria-label="$mappUtils.isAndroid()"><!--[--><!--]--> $mappUtils.isAndroid() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#openchat" class="router-link-active router-link-exact-active sidebar-item" aria-label="$openChat"><!--[--><!--]--> $openChat <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#openchat-openchat-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="$openChat.openChat(option)"><!--[--><!--]--> $openChat.openChat(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#openchat-contactcustomerservice-text-nick" class="router-link-active router-link-exact-active sidebar-item" aria-label="$openChat.contactCustomerService(text, nick)"><!--[--><!--]--> $openChat.contactCustomerService(text, nick) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#userinfochanger" class="router-link-active router-link-exact-active sidebar-item" aria-label="$userInfoChanger"><!--[--><!--]--> $userInfoChanger <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#userinfochanger-getuserinfo" class="router-link-active router-link-exact-active sidebar-item" aria-label="$userInfoChanger.getUserInfo()"><!--[--><!--]--> $userInfoChanger.getUserInfo() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#userinfochanger-updateuserinfo" class="router-link-active router-link-exact-active sidebar-item" aria-label="$userInfoChanger.updateUserInfo()"><!--[--><!--]--> $userInfoChanger.updateUserInfo() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#beacon" class="router-link-active router-link-exact-active sidebar-item" aria-label="$beacon"><!--[--><!--]--> $beacon <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#sensorsbeacon" class="router-link-active router-link-exact-active sidebar-item" aria-label="$sensorsBeacon"><!--[--><!--]--> $sensorsBeacon <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#sensorsbeacon-sensorsbeacon-name-ext" class="router-link-active router-link-exact-active sidebar-item" aria-label="$sensorsBeacon.sensorsBeacon(name, ext)"><!--[--><!--]--> $sensorsBeacon.sensorsBeacon(name, ext) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#moment" class="router-link-active router-link-exact-active sidebar-item" aria-label="$moment"><!--[--><!--]--> $moment <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#ayapi" class="router-link-active router-link-exact-active sidebar-item" aria-label="$ayApi"><!--[--><!--]--> $ayApi <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#ayapi-api-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="$ayApi.api(option)"><!--[--><!--]--> $ayApi.api(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#ayapi-apiasync-option" class="router-link-active router-link-exact-active sidebar-item" aria-label="$ayApi.apiAsync(option)"><!--[--><!--]--> $ayApi.apiAsync(option) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#adsensorsbeacon" class="router-link-active router-link-exact-active sidebar-item" aria-label="$adSensorsBeacon"><!--[--><!--]--> $adSensorsBeacon <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#adsensorsbeacon-adviewbeacon-addata-pid" class="router-link-active router-link-exact-active sidebar-item" aria-label="$adSensorsBeacon.adViewBeacon(adData,pid)"><!--[--><!--]--> $adSensorsBeacon.adViewBeacon(adData,pid) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#adsensorsbeacon-adordernowbeacon-addata-btntext-pid" class="router-link-active router-link-exact-active sidebar-item" aria-label="$adSensorsBeacon.adOrderNowBeacon(adData,btnText,pid)"><!--[--><!--]--> $adSensorsBeacon.adOrderNowBeacon(adData,btnText,pid) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#adimport" class="router-link-active router-link-exact-active sidebar-item" aria-label="$adImport"><!--[--><!--]--> $adImport <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#adimport-addata" class="router-link-active router-link-exact-active sidebar-item" aria-label="$adImport.adData"><!--[--><!--]--> $adImport.adData <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#adimport-callback-isblock" class="router-link-active router-link-exact-active sidebar-item" aria-label="$adImport.callback(isBlock)"><!--[--><!--]--> $adImport.callback(isBlock) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/naruse-doc/docs/dist/Api.html#uninstall" class="router-link-active router-link-exact-active sidebar-item" aria-label="$uninstall()"><!--[--><!--]--> $uninstall() <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a href="/naruse-doc/docs/dist/best%20practice.html" class="sidebar-item sidebar-heading" aria-label="最佳实践"><!--[--><!--]--> 最佳实践 <!--[--><!--]--></a><!----></li><li><a href="/naruse-doc/docs/dist/JS%E5%BC%95%E6%93%8E.html" class="sidebar-item sidebar-heading" aria-label="JS 引擎"><!--[--><!--]--> JS 引擎 <!--[--><!--]--></a><!----></li><li><a href="/naruse-doc/docs/dist/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8.html" class="sidebar-item sidebar-heading" aria-label="如何接入已有项目"><!--[--><!--]--> 如何接入已有项目 <!--[--><!--]--></a><!----></li><li><a href="/naruse-doc/docs/dist/%E6%9B%B4%E6%96%B0%E8%AE%B0%E5%BD%95.html" class="sidebar-item sidebar-heading" aria-label="更新记录"><!--[--><!--]--> 更新记录 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h1><p><code>Naruse</code> 的 API 包括 <code>Naurse</code> 内置提供的 API 以及对小程序的端能力 API 的封装，同时大部分的标准与封装方式与 <code>Taro</code> 保持统一。</p><p>其中对小程序的端能力 API 的封装，主要会基于支付宝小程序的 API 规范，对于其他小程序类似的 API，会在 Naruse 中适配为小程序 API 的规范格式，并且都挂载在 Naruse 命名空间下。</p><p>对于小程序平台特有的 API，可以先尝试用 Naruse. + API 名称来进行调用，如果出现未定义，则可以使用对应小程序平台的命名空间（如 my、wx 等）来进行调用，并通过提 PR 或者 issue来获得更新支持。</p><p>本章主要介绍已经统一的平台 API</p><p>当然，由于各个平台的差异过多，个人精力有限，仅统一了部分常用平台API， 所以难免有些 API 没有加入 Naruse 的适配，你可以通过提 PR 或者 issue，来获得帮助。</p><p>同时，为了方便代码书写，Naruse 默认对小程序的异步 API 进行了 promisify 化，你可以像使用 Promise 那样进行调用，例如</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Naruse <span class="token keyword">from</span> <span class="token string">&#39;Naruse&#39;</span>

Naruse<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;123&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">&#39;123&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="基础" tabindex="-1"><a class="header-anchor" href="#基础" aria-hidden="true">#</a> 基础</h2><h3 id="getsysteminfosync" tabindex="-1"><a class="header-anchor" href="#getsysteminfosync" aria-hidden="true">#</a> getSystemInfoSync()</h3><p>获取系统基础信息同步版本</p><blockquote><p>参考: <a href="https://opendocs.alipay.com/mini/api/system-info" target="_blank" rel="noopener noreferrer">my.getSystemInfo - 支付宝文档中心 (alipay.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h4 id="参数" tabindex="-1"><a class="header-anchor" href="#参数" aria-hidden="true">#</a> 参数</h4><p>无</p><h4 id="返回值" tabindex="-1"><a class="header-anchor" href="#返回值" aria-hidden="true">#</a> 返回值</h4><table><thead><tr><th>参数</th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>model</td><td>String</td><td>手机型号。</td></tr><tr><td>pixelRatio</td><td>Number</td><td>设备像素比。PC端默认 1.5</td></tr><tr><td>windowWidth</td><td>Number</td><td>窗口宽度。</td></tr><tr><td>windowHeight</td><td>Number</td><td>窗口高度。</td></tr><tr><td>language</td><td>String</td><td>zh-Hans</td></tr><tr><td>version</td><td>String</td><td>naruse版本号。</td></tr><tr><td>storage</td><td>String</td><td>设备磁盘容量。PC没有此字段</td></tr><tr><td>currentBattery</td><td>String</td><td>当前电量百分比。PC没有此字段</td></tr><tr><td>system</td><td>String</td><td>系统版本。pc端为 mac/win/linux/unix</td></tr><tr><td>platform</td><td>String</td><td>系统名：Android/iOS / iPhone OS / PC</td></tr><tr><td>titleBarHeight</td><td>Number</td><td>标题栏高度。PC为0</td></tr><tr><td>statusBarHeight</td><td>Number</td><td>状态栏高度。PC为0</td></tr><tr><td>screenWidth</td><td>Number</td><td>屏幕宽度。</td></tr><tr><td>screenHeight</td><td>Number</td><td>屏幕高度。</td></tr><tr><td>brand</td><td>String</td><td>手机品牌。PC为空</td></tr><tr><td>fontSizeSetting</td><td>Number</td><td>用户设置字体大小</td></tr><tr><td>app</td><td>String</td><td>当前运行的客户端。若当前为支付宝，则有效值为 &quot;alipay&quot;。pc端则为NARUSE</td></tr></tbody></table><h4 id="例子" tabindex="-1"><a class="header-anchor" href="#例子" aria-hidden="true">#</a> 例子</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">const</span> res <span class="token operator">=</span> Naruse<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>model<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>pixelRatio<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>windowWidth<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>windowHeight<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>language<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>platform<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="getsysteminfo-option" tabindex="-1"><a class="header-anchor" href="#getsysteminfo-option" aria-hidden="true">#</a> getSystemInfo(option)</h3><p>获取用户信息的异步版本</p><h4 id="参数-1" tabindex="-1"><a class="header-anchor" href="#参数-1" aria-hidden="true">#</a> 参数</h4><p><strong>option</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>success</td><td><code>(res: Result) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr><tr><td>fail</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>complete</td><td><code>(res: any) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><h4 id="返回值-1" tabindex="-1"><a class="header-anchor" href="#返回值-1" aria-hidden="true">#</a> 返回值</h4><p><strong>Result</strong></p><table><thead><tr><th>参数</th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>model</td><td>String</td><td>手机型号。</td></tr><tr><td>pixelRatio</td><td>Number</td><td>设备像素比。PC端默认 1.5</td></tr><tr><td>windowWidth</td><td>Number</td><td>窗口宽度。</td></tr><tr><td>windowHeight</td><td>Number</td><td>窗口高度。</td></tr><tr><td>language</td><td>String</td><td>zh-Hans</td></tr><tr><td>version</td><td>String</td><td>naruse版本号。</td></tr><tr><td>storage</td><td>String</td><td>设备磁盘容量。PC没有此字段</td></tr><tr><td>currentBattery</td><td>String</td><td>当前电量百分比。PC没有此字段</td></tr><tr><td>system</td><td>String</td><td>系统版本。pc端为 mac/win/linux/unix</td></tr><tr><td>platform</td><td>String</td><td>系统名：Android/iOS / iPhone OS / PC</td></tr><tr><td>titleBarHeight</td><td>Number</td><td>标题栏高度。PC为0</td></tr><tr><td>statusBarHeight</td><td>Number</td><td>状态栏高度。PC为0</td></tr><tr><td>screenWidth</td><td>Number</td><td>屏幕宽度。</td></tr><tr><td>screenHeight</td><td>Number</td><td>屏幕高度。</td></tr><tr><td>brand</td><td>String</td><td>手机品牌。PC为空</td></tr><tr><td>fontSizeSetting</td><td>Number</td><td>用户设置字体大小</td></tr><tr><td>app</td><td>String</td><td>当前运行的客户端。若当前为支付宝，则有效值为 &quot;alipay&quot;。pc端则为NARUSE</td></tr></tbody></table><h4 id="示例-1" tabindex="-1"><a class="header-anchor" href="#示例-1" aria-hidden="true">#</a> 示例 1</h4><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code>Naruse<span class="token punctuation">.</span><span class="token function">getSystemInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> res <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="示例-2" tabindex="-1"><a class="header-anchor" href="#示例-2" aria-hidden="true">#</a> 示例 2</h4><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code>Naruse<span class="token punctuation">.</span><span class="token function">getSystemInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>model<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>pixelRatio<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>windowWidth<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>windowHeight<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>language<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>platform<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="路由" tabindex="-1"><a class="header-anchor" href="#路由" aria-hidden="true">#</a> 路由</h2><h3 id="navigateto-option" tabindex="-1"><a class="header-anchor" href="#navigateto-option" aria-hidden="true">#</a> navigateTo(option)</h3><p>保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面。使用 Naruse.navigateBack 可以返回到原页面。小程序中页面栈最多十层。</p><h4 id="参数-2" tabindex="-1"><a class="header-anchor" href="#参数-2" aria-hidden="true">#</a> 参数</h4><p><strong>option</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>url</td><td><code>string</code></td><td>是</td><td>需要跳转的应用内非 tabBar 的页面的路径, 路径后可以带参数。参数与路径之间使用 <code>?</code> 分隔，参数键与参数值用 <code>=</code> 相连，不同参数用 <code>&amp;</code> 分隔；如 &#39;path?key=value&amp;key2=value2&#39;</td></tr><tr><td>complete</td><td><code>(res:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr><tr><td>fail</td><td><code>(res:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>success</td><td><code>(res: any) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr></tbody></table><h4 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;#/tradeManagment&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="navigateback-option" tabindex="-1"><a class="header-anchor" href="#navigateback-option" aria-hidden="true">#</a> navigateBack(option)</h3><p>关闭当前页面，返回上一页面或多级页面。</p><h4 id="参数-3" tabindex="-1"><a class="header-anchor" href="#参数-3" aria-hidden="true">#</a> 参数</h4><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>complete</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr><tr><td>delta</td><td><code>number</code></td><td>否</td><td>返回的页面数，如果 delta 大于现有页面数，则返回到首页。</td></tr><tr><td>fail</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>success</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr></tbody></table><h4 id="例子-1" tabindex="-1"><a class="header-anchor" href="#例子-1" aria-hidden="true">#</a> 例子</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 注意：调用 navigateTo 跳转时</span>
<span class="token comment">// 此处是A页面</span>
Naruse<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;B&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 此处是B页面</span>
Naruse<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;C&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 在C页面内 navigateBack，将返回A页面</span>
Naruse<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">delta</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="navigatetowebpage-option" tabindex="-1"><a class="header-anchor" href="#navigatetowebpage-option" aria-hidden="true">#</a> navigateToWebPage(option)</h3><p>打开一个外部H5页面</p><p>::: 注意 在小程序等具有域名白名单的应用内使用此功能时，请确定要打开的链接在白名单内 :::</p><h4 id="参数-4" tabindex="-1"><a class="header-anchor" href="#参数-4" aria-hidden="true">#</a> 参数</h4><p><strong>option</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>url</td><td><code>string</code></td><td>是</td><td>需要打开的外面页面地址，http或者https，在小程序中调用时请注意白名单限制</td></tr><tr><td>complete</td><td><code>(res:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr><tr><td>fail</td><td><code>(res:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>success</td><td><code>(res: any) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr></tbody></table><h4 id="示例-3" tabindex="-1"><a class="header-anchor" href="#示例-3" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">navigateToWebPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;https://taobao.com&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="设备" tabindex="-1"><a class="header-anchor" href="#设备" aria-hidden="true">#</a> 设备</h2><h3 id="setclipboarddata-option" tabindex="-1"><a class="header-anchor" href="#setclipboarddata-option" aria-hidden="true">#</a> setClipboardData(option)</h3><p>设置系统剪贴板的内容。</p><h4 id="参数-5" tabindex="-1"><a class="header-anchor" href="#参数-5" aria-hidden="true">#</a> 参数</h4><p><strong>option</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>data</td><td><code>string</code></td><td>是</td><td>剪贴板的内容</td></tr><tr><td>complete</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr><tr><td>fail</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>success</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr></tbody></table><h4 id="返回值-2" tabindex="-1"><a class="header-anchor" href="#返回值-2" aria-hidden="true">#</a> 返回值</h4><p><strong>Promised</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>errMsg</td><td><code>string</code></td><td>调用信息</td></tr><tr><td>data</td><td><code>string</code></td><td>剪贴板的内容</td></tr></tbody></table><h4 id="示例代码" tabindex="-1"><a class="header-anchor" href="#示例代码" aria-hidden="true">#</a> 示例代码</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">setClipboardData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Naruse<span class="token punctuation">.</span><span class="token function">getClipboardData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="getclipboarddata-option" tabindex="-1"><a class="header-anchor" href="#getclipboarddata-option" aria-hidden="true">#</a> getClipboardData(option)</h3><p>获取系统剪贴板内容</p><h4 id="参数-6" tabindex="-1"><a class="header-anchor" href="#参数-6" aria-hidden="true">#</a> 参数</h4><p><strong>option</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>complete</td><td><code>(res:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr><tr><td>fail</td><td><code>(res:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>success</td><td><code>(res: SuccessCallbackOption) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr></tbody></table><p><strong>SuccessCallbackOption</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>data</td><td><code>string</code></td><td>剪贴板的内容</td></tr></tbody></table><h4 id="返回值-3" tabindex="-1"><a class="header-anchor" href="#返回值-3" aria-hidden="true">#</a> 返回值</h4><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>errMsg</td><td><code>string</code></td><td>调用信息</td></tr><tr><td>data</td><td><code>string</code></td><td>剪贴板的内容</td></tr></tbody></table><h4 id="示例-4" tabindex="-1"><a class="header-anchor" href="#示例-4" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">getClipboardData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="数据缓存" tabindex="-1"><a class="header-anchor" href="#数据缓存" aria-hidden="true">#</a> 数据缓存</h2><h3 id="setstoragesync-key-data" tabindex="-1"><a class="header-anchor" href="#setstoragesync-key-data" aria-hidden="true">#</a> setStorageSync(key, data)</h3><p>设置缓存的同步版本</p><blockquote><p>参考：<a href="https://opendocs.alipay.com/mini/api/system-info" target="_blank" rel="noopener noreferrer">my.getSystemInfo - 支付宝文档中心 (alipay.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h4 id="参数-7" tabindex="-1"><a class="header-anchor" href="#参数-7" aria-hidden="true">#</a> 参数</h4><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td><td>本地缓存中指定的 key</td></tr><tr><td>data</td><td><code>any</code></td><td>需要存储的内容。只支持原生类型、Date、及能够通过<code>JSON.stringify</code>序列化的对象。</td></tr></tbody></table><h4 id="示例-5" tabindex="-1"><a class="header-anchor" href="#示例-5" aria-hidden="true">#</a> 示例</h4><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code>Naruse<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="setstorage-option" tabindex="-1"><a class="header-anchor" href="#setstorage-option" aria-hidden="true">#</a> setStorage(option)</h3><p>将数据存储在本地缓存中指定的 key 中。会覆盖掉原来该 key 对应的内容。除非用户主动删除或因存储空间原因被系统清理，否则数据都一直可用。单个 key 允许存储的最大数据长度为 1MB，所有数据存储上限为 10MB。</p><h4 id="参数-8" tabindex="-1"><a class="header-anchor" href="#参数-8" aria-hidden="true">#</a> 参数</h4><p><strong>option</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>data</td><td><code>any</code></td><td>是</td><td>需要存储的内容。只支持原生类型、Date、及能够通过<code>JSON.stringify</code>序列化的对象。</td></tr><tr><td>key</td><td><code>string</code></td><td>是</td><td>本地缓存中指定的 key</td></tr><tr><td>complete</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr><tr><td>fail</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>success</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr></tbody></table><h4 id="示例-6" tabindex="-1"><a class="header-anchor" href="#示例-6" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token string">&quot;value&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="getstoragesync-key" tabindex="-1"><a class="header-anchor" href="#getstoragesync-key" aria-hidden="true">#</a> getStorageSync(key)</h3><p>获取缓存的同步版本</p><h4 id="参数-9" tabindex="-1"><a class="header-anchor" href="#参数-9" aria-hidden="true">#</a> 参数</h4><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>key</td><td><code>T</code></td><td>本地缓存中指定的 key</td></tr></tbody></table><h4 id="示例-7" tabindex="-1"><a class="header-anchor" href="#示例-7" aria-hidden="true">#</a> 示例</h4><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code> var value = Naruse.getStorageSync(&#39;key&#39;)
 if (value) {
    // Do something with return value
 }

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="getstorage-option" tabindex="-1"><a class="header-anchor" href="#getstorage-option" aria-hidden="true">#</a> getStorage(option)</h3><p>从本地缓存中异步获取指定 key 的内容</p><h4 id="参数-10" tabindex="-1"><a class="header-anchor" href="#参数-10" aria-hidden="true">#</a> 参数</h4><p>option</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td><td>是</td><td>本地缓存中指定的 key</td></tr><tr><td>complete</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr><tr><td>fail</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>success</td><td><code>(result: SuccessCallbackResult&lt;T&gt;) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr></tbody></table><p><strong>SuccessCallbackResult</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>data</td><td><code>T</code></td><td>key对应的内容</td></tr><tr><td>errMsg</td><td><code>string</code></td><td>调用结果</td></tr></tbody></table><h4 id="示例代码-1" tabindex="-1"><a class="header-anchor" href="#示例代码-1" aria-hidden="true">#</a> 示例代码</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="removestorage-option" tabindex="-1"><a class="header-anchor" href="#removestorage-option" aria-hidden="true">#</a> removeStorage(option)</h3><p>从本地缓存中移除指定 key</p><h4 id="参数-11" tabindex="-1"><a class="header-anchor" href="#参数-11" aria-hidden="true">#</a> 参数</h4><p>option</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td><td>是</td><td>本地缓存中指定的 key</td></tr><tr><td>complete</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr><tr><td>fail</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>success</td><td><code>(result:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr></tbody></table><h4 id="示例代码-2" tabindex="-1"><a class="header-anchor" href="#示例代码-2" aria-hidden="true">#</a> 示例代码</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">removeStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="removestoragesync-key" tabindex="-1"><a class="header-anchor" href="#removestoragesync-key" aria-hidden="true">#</a> removeStorageSync(key)</h3><p>同步的从缓存中删除某个key</p><h4 id="参数-12" tabindex="-1"><a class="header-anchor" href="#参数-12" aria-hidden="true">#</a> 参数</h4><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td><td>本地缓存中指定的 key</td></tr></tbody></table><h4 id="示例代码-3" tabindex="-1"><a class="header-anchor" href="#示例代码-3" aria-hidden="true">#</a> 示例代码</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">removeStorageSync</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="getstorageinfo-option" tabindex="-1"><a class="header-anchor" href="#getstorageinfo-option" aria-hidden="true">#</a> getStorageInfo(option)</h4><p>异步获取当前storage的相关信息</p><h4 id="参数-13" tabindex="-1"><a class="header-anchor" href="#参数-13" aria-hidden="true">#</a> 参数</h4><p><strong>option</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>complete</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr><tr><td>fail</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>success</td><td><code>(result:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr></tbody></table><p><strong>SuccessCallbackOption</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>currentSize</td><td><code>number</code></td><td>当前占用的空间大小, 单位 KB</td></tr><tr><td>keys</td><td><code>string[]</code></td><td>当前 storage 中所有的 key</td></tr><tr><td>limitSize</td><td><code>number</code></td><td>限制的空间大小，单位 KB</td></tr></tbody></table><h4 id="示例代码-4" tabindex="-1"><a class="header-anchor" href="#示例代码-4" aria-hidden="true">#</a> 示例代码</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">getStorageInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>keys<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>currentSize<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>limitSize<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="getstorageinfo-option-1" tabindex="-1"><a class="header-anchor" href="#getstorageinfo-option-1" aria-hidden="true">#</a> getStorageInfo(option)</h3><p>异步获取当前storage的相关信息</p><h4 id="返回值-4" tabindex="-1"><a class="header-anchor" href="#返回值-4" aria-hidden="true">#</a> 返回值</h4><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>currentSize</td><td><code>number</code></td><td>当前占用的空间大小, 单位 KB</td></tr><tr><td>keys</td><td><code>string[]</code></td><td>当前 storage 中所有的 key</td></tr><tr><td>limitSize</td><td><code>number</code></td><td>限制的空间大小，单位 KB</td></tr></tbody></table><h4 id="示例代码-5" tabindex="-1"><a class="header-anchor" href="#示例代码-5" aria-hidden="true">#</a> 示例代码</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">const</span> res <span class="token operator">=</span> Naruse<span class="token punctuation">.</span><span class="token function">getStorageInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>keys<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>currentSize<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>limitSize<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="clearstorage-option" tabindex="-1"><a class="header-anchor" href="#clearstorage-option" aria-hidden="true">#</a> clearStorage(option)</h3><p>异步的清理本地数据缓存</p><h4 id="参数-14" tabindex="-1"><a class="header-anchor" href="#参数-14" aria-hidden="true">#</a> 参数</h4><p>option</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>complete</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr><tr><td>fail</td><td><code>(res: CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>success</td><td><code>(result:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr></tbody></table><h4 id="示例-8" tabindex="-1"><a class="header-anchor" href="#示例-8" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">clearStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="clearstoragesync" tabindex="-1"><a class="header-anchor" href="#clearstoragesync" aria-hidden="true">#</a> clearStorageSync()</h3><p>同步的清除本地数据缓存</p><h4 id="示例-9" tabindex="-1"><a class="header-anchor" href="#示例-9" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Naruse<span class="token punctuation">.</span><span class="token function">clearStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="dom" tabindex="-1"><a class="header-anchor" href="#dom" aria-hidden="true">#</a> DOM</h2><p>小程序端并没有提供关于DOM节点直接的操作，Naruse也没有像其他主流跨平台框架使用模拟底层DOM的方式，故在小程序端提供了一些DOM操作API供大家使用。</p><h3 id="rendercomponentonpage-pageroute-t" tabindex="-1"><a class="header-anchor" href="#rendercomponentonpage-pageroute-t" aria-hidden="true">#</a> renderComponentOnPage(pageRoute,T)</h3><blockquote><p>基础库0.0.6以上支持</p></blockquote><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>此api因为实验性功能原因，在0.0.6版本是作为全局变量使用！后续版本将会绑定至Naruse</p></div><p>在某个指定的页面渲染某个组件，渲染组件在页面中具体的位置依照Componet组件的位置而不同。</p><blockquote><p>注意：如果要渲染的页面并没有被加载，则组件并不会渲染，即使页面加载了也不会重新渲染</p></blockquote><h4 id="参数-15" tabindex="-1"><a class="header-anchor" href="#参数-15" aria-hidden="true">#</a> 参数</h4><p><strong>pageRoute</strong> 页面路由 <code>string</code></p><p>此处要填写标准的小程序路由，一般是不带/开头的</p><p><strong>T</strong> 渲染组件 <code>Naruse.Component</code></p><h4 id="示例-10" tabindex="-1"><a class="header-anchor" href="#示例-10" aria-hidden="true">#</a> 示例</h4><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">测试组件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 注意！作为全局变量直接使用！</span>
<span class="token function">renderComponentOnPage</span><span class="token punctuation">(</span><span class="token string">&#39;pages/index/index&#39;</span><span class="token punctuation">,</span> Demo<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="hoc-高阶函数" tabindex="-1"><a class="header-anchor" href="#hoc-高阶函数" aria-hidden="true">#</a> HOC（高阶函数）</h2><h3 id="wtihpage-t" tabindex="-1"><a class="header-anchor" href="#wtihpage-t" aria-hidden="true">#</a> wtihPage(T)</h3><blockquote><p>基础库0.0.6以上支持</p></blockquote><p>你可以用withPage包裹你的组件，你的组件通过这个高阶函数会你的组件在<strong>初始化</strong>时，将当前页面的 <strong>page</strong> 实例作为参数 <code>currentPage</code> 传入到组件的props中供你使用。</p><h4 id="参数-16" tabindex="-1"><a class="header-anchor" href="#参数-16" aria-hidden="true">#</a> 参数</h4><blockquote><p>withPage = (T: Naruse.Component) =&gt; Naruse.component</p></blockquote><p><strong>Page</strong> 页面实例</p><table><thead><tr><th>参数</th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>route</td><td><code>string</code></td><td>当前页面路由。示例：小程序端: <code>pages/my/my</code> h5端 :<code>#/my</code></td></tr><tr><td>events</td><td><code>PageEvent</code></td><td>页面事件中心，订阅事件监听页面的相关行为</td></tr><tr><td>parma</td><td><code>Record&lt;string, string&gt;</code></td><td>页面路由参数</td></tr></tbody></table><p><strong>PageEvent</strong> 页面事件中心</p><table><thead><tr><th>参数</th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>on</td><td><code>(eventName: string, Function)=&gt;void</code></td><td>监听某个事件</td></tr><tr><td>off</td><td><code>(eventName: string, Function)=&gt;void</code></td><td>卸载某个事件</td></tr><tr><td><s>once</s></td><td><code>(eventName: string, Function)=&gt;void</code></td><td>只监听一个某个事件</td></tr></tbody></table><p><strong>目前支持的事件有</strong></p><table><thead><tr><th>事件名</th><th>触发时机</th></tr></thead><tbody><tr><td>onUnload</td><td>当页面被卸载时调用</td></tr><tr><td>onPageScroll</td><td>当页面滚动时触发</td></tr><tr><td>onHide</td><td>当页面被隐藏时触发</td></tr><tr><td>onShow</td><td>当页面再次展示时触发</td></tr></tbody></table><blockquote><p>挂载事件完毕请不要忘记调用卸载事件哦</p></blockquote><h4 id="示例-11" tabindex="-1"><a class="header-anchor" href="#示例-11" aria-hidden="true">#</a> 示例</h4><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">Naruse<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentDidMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> currentPage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
   	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>currentPage<span class="token punctuation">.</span>route<span class="token punctuation">)</span><span class="token punctuation">;</span>
    currentPage<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;onUnload&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;当前页面被卸载啦，提醒一下&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">测试页</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Naruse<span class="token punctuation">.</span><span class="token function">withPage</span><span class="token punctuation">(</span>Demo<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="网络" tabindex="-1"><a class="header-anchor" href="#网络" aria-hidden="true">#</a> 网络</h2><p>因为naruse目前的应用场景是融入到各个产品不同的开发体系当中，因此没有单独封装网络请求能力，但是为了统一性，多个平台之间保持统一，在引用naruse时建议自行封装统一的网络接口。</p><blockquote><p>提示：爱用产品线内所有产品内使用的naruse均按照以下标准封装完毕，详细的可以查看<a href="#%E7%88%B1%E7%94%A8%E4%BA%A7%E5%93%81%E7%BA%BF%E4%B8%93%E5%B1%9Eapi">爱用产品线专属api</a></p></blockquote><h2 id="爱用产品线专属api" tabindex="-1"><a class="header-anchor" href="#爱用产品线专属api" aria-hidden="true">#</a> 爱用产品线专属api</h2><p>naruse专门为爱用产品线服务封装的统一api，会作为全局变量注入到运行环境当中，可以直接使用</p><blockquote><p>注意：专属api大部分是由产品内部封装，并没有promise 化</p></blockquote><blockquote><p>所有变量名均使用$ + 属性域</p></blockquote><h3 id="mapputils-工具类" tabindex="-1"><a class="header-anchor" href="#mapputils-工具类" aria-hidden="true">#</a> $mappUtils 工具类</h3><p>封装了一些程序常用工具类</p><h3 id="mapputils-hidetabbar" tabindex="-1"><a class="header-anchor" href="#mapputils-hidetabbar" aria-hidden="true">#</a> $mappUtils.hideTabBar()</h3><p>隐藏底部tab栏。PC端调用无效，只会在有tab栏的页面生效</p><h4 id="示例-12" tabindex="-1"><a class="header-anchor" href="#示例-12" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$mappUtils<span class="token punctuation">.</span><span class="token function">hideTabBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="mapputils-showtabbar" tabindex="-1"><a class="header-anchor" href="#mapputils-showtabbar" aria-hidden="true">#</a> $mappUtils.showTabBar()</h3><p>显示底部tab栏。PC端调用无效，只会在有tab栏的页面生效</p><h4 id="示例-13" tabindex="-1"><a class="header-anchor" href="#示例-13" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$mappUtils<span class="token punctuation">.</span><span class="token function">showTabBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="mapputils-getcurrentpagename" tabindex="-1"><a class="header-anchor" href="#mapputils-getcurrentpagename" aria-hidden="true">#</a> $mappUtils.getCurrentPageName()</h3><p>获取当前页面路由名。PC端会获取当前window.page变量名</p><h4 id="返回值-5" tabindex="-1"><a class="header-anchor" href="#返回值-5" aria-hidden="true">#</a> 返回值</h4><p>返回当前页面路径名</p><h4 id="示例-14" tabindex="-1"><a class="header-anchor" href="#示例-14" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$mappUtils<span class="token punctuation">.</span><span class="token function">getCurrentPageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="mapputils-isios" tabindex="-1"><a class="header-anchor" href="#mapputils-isios" aria-hidden="true">#</a> $mappUtils.isIOS()</h3><p>判断当前环境是否是ios</p><h4 id="返回值-6" tabindex="-1"><a class="header-anchor" href="#返回值-6" aria-hidden="true">#</a> 返回值</h4><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>isIOS</td><td><code>boolean</code></td><td>是否是ios</td></tr></tbody></table><h4 id="示例-15" tabindex="-1"><a class="header-anchor" href="#示例-15" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$mappUtils<span class="token punctuation">.</span><span class="token function">isIOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="mapputils-isandroid" tabindex="-1"><a class="header-anchor" href="#mapputils-isandroid" aria-hidden="true">#</a> $mappUtils.isAndroid()</h3><p>判断当前环境是否是Android</p><h4 id="返回值-7" tabindex="-1"><a class="header-anchor" href="#返回值-7" aria-hidden="true">#</a> 返回值</h4><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>isAndroid</td><td><code>boolean</code></td><td>是否是安卓环境</td></tr></tbody></table><h4 id="示例-16" tabindex="-1"><a class="header-anchor" href="#示例-16" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$mappUtils<span class="token punctuation">.</span><span class="token function">isAndroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="openchat" tabindex="-1"><a class="header-anchor" href="#openchat" aria-hidden="true">#</a> $openChat</h3><p>联系用户相关全局变量，PC端与小程序端均是通过旺旺联系</p><h3 id="openchat-openchat-option" tabindex="-1"><a class="header-anchor" href="#openchat-openchat-option" aria-hidden="true">#</a> $openChat.openChat(option)</h3><p>通过旺旺联系，打开对应旺旺窗口</p><h4 id="参数-17" tabindex="-1"><a class="header-anchor" href="#参数-17" aria-hidden="true">#</a> 参数</h4><p><strong>option</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>nick</td><td><code>string</code></td><td>否</td><td>要联系的旺旺名称</td></tr><tr><td>text</td><td><code>string</code></td><td>是</td><td>要发送的消息</td></tr><tr><td>success</td><td><code>(result:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用成功的回调函数</td></tr><tr><td>fail</td><td><code>(result:CallbackResult) =&gt; void</code></td><td>否</td><td>接口调用失败的回调函数</td></tr></tbody></table><h4 id="示例-17" tabindex="-1"><a class="header-anchor" href="#示例-17" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$openChat<span class="token punctuation">.</span><span class="token function">openChat</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">nick</span><span class="token operator">:</span> <span class="token string">&#39;爱用科技&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;你好呀&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="openchat-contactcustomerservice-text-nick" tabindex="-1"><a class="header-anchor" href="#openchat-contactcustomerservice-text-nick" aria-hidden="true">#</a> $openChat.contactCustomerService(text, nick)</h3><p>联系旺旺的简易版本，当不填nick时自动转向对应产品客服</p><h4 id="参数-18" tabindex="-1"><a class="header-anchor" href="#参数-18" aria-hidden="true">#</a> 参数</h4><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td><strong>text</strong></td><td><code>string</code></td><td>是</td><td>要发送的消息</td></tr><tr><td><strong>nick</strong></td><td><code>string</code></td><td>否</td><td>要联系的旺旺名称，当不填nick时自动转向对应产品客服</td></tr></tbody></table><h4 id="示例-18" tabindex="-1"><a class="header-anchor" href="#示例-18" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$openChat<span class="token punctuation">.</span><span class="token function">contactCustomerService</span><span class="token punctuation">(</span><span class="token string">&#39;我有问题要联系客服！&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="userinfochanger" tabindex="-1"><a class="header-anchor" href="#userinfochanger" aria-hidden="true">#</a> $userInfoChanger</h3><p>用户信息管理相关</p><h3 id="userinfochanger-getuserinfo" tabindex="-1"><a class="header-anchor" href="#userinfochanger-getuserinfo" aria-hidden="true">#</a> $userInfoChanger.getUserInfo()</h3><p>获取当前已登陆的用户信息</p><blockquote><p>此处不会写出用户信息的详细结构，详细结构请自行查看对应产品文档</p></blockquote><h4 id="示例-19" tabindex="-1"><a class="header-anchor" href="#示例-19" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> userInfo <span class="token operator">=</span> $userInfoChanger<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="userinfochanger-updateuserinfo" tabindex="-1"><a class="header-anchor" href="#userinfochanger-updateuserinfo" aria-hidden="true">#</a> $userInfoChanger.updateUserInfo()</h3><p>更新用户信息</p><blockquote><p>当用户完成某些动作后需要更新用户信息，用于从后端重新获取最新的用户信息</p></blockquote><h4 id="返回值-8" tabindex="-1"><a class="header-anchor" href="#返回值-8" aria-hidden="true">#</a> 返回值</h4><p><strong>Promise&lt;newest&gt;</strong></p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>newest</td><td>用户最新的用户信息，与getUserInfo获取到相同的参数</td></tr></tbody></table><h4 id="示例-20" tabindex="-1"><a class="header-anchor" href="#示例-20" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$userInfoChanger<span class="token punctuation">.</span><span class="token function">updateUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">newest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newest<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="beacon" tabindex="-1"><a class="header-anchor" href="#beacon" aria-hidden="true">#</a> $beacon</h3><p>爱用专用埋点</p><blockquote><p>补充ing</p></blockquote><h3 id="sensorsbeacon" tabindex="-1"><a class="header-anchor" href="#sensorsbeacon" aria-hidden="true">#</a> $sensorsBeacon</h3><p>神策埋点相关</p><h3 id="sensorsbeacon-sensorsbeacon-name-ext" tabindex="-1"><a class="header-anchor" href="#sensorsbeacon-sensorsbeacon-name-ext" aria-hidden="true">#</a> $sensorsBeacon.sensorsBeacon(name, ext)</h3><p>发送神策埋点</p><blockquote><p>广告系统相关埋点请使用封装好的广告<a href="#adSensorsBeacon">$adSensorsBeacon</a></p></blockquote><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>name</td><td><code>string</code></td><td>是</td><td>神策埋点名称</td></tr><tr><td>ext</td><td><code>Record&lt;stirng,any&gt;</code></td><td>否</td><td>埋点属性</td></tr></tbody></table><h4 id="示例-21" tabindex="-1"><a class="header-anchor" href="#示例-21" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$sensorsBeacon<span class="token punctuation">.</span><span class="token function">sensorsBeacon</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">testProperty</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="moment" tabindex="-1"><a class="header-anchor" href="#moment" aria-hidden="true">#</a> $moment</h3><p>日期处理函数，具体调用方式可以直接查看官方文档</p><p><a href="http://momentjs.cn/docs/" target="_blank" rel="noopener noreferrer">http://momentjs.cn/docs/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="示例-22" tabindex="-1"><a class="header-anchor" href="#示例-22" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$moment</span><span class="token punctuation">(</span><span class="token string">&#39;2012-10-14&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="ayapi" tabindex="-1"><a class="header-anchor" href="#ayapi" aria-hidden="true">#</a> $ayApi</h3><p>爱用专用网络请求相关</p><h3 id="ayapi-api-option" tabindex="-1"><a class="header-anchor" href="#ayapi-api-option" aria-hidden="true">#</a> $ayApi.api(option)</h3><p>http请求api</p><blockquote><p>默认所有请求均为POST请求，在移动端使用时请自行添加apiName</p></blockquote><h4 id="参数-19" tabindex="-1"><a class="header-anchor" href="#参数-19" aria-hidden="true">#</a> 参数</h4><p><strong>option</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>method</td><td><code>string</code></td><td>是</td><td>请求URL</td></tr><tr><td>args</td><td><code>Record&lt;stirng,any&gt;</code></td><td>否</td><td>请求参数</td></tr><tr><td>mode</td><td><code>jsonp</code> 或 <code>post </code></td><td>否</td><td>请求类型</td></tr><tr><td>host</td><td><code>string</code></td><td>否</td><td>服务器地址</td></tr><tr><td>headers</td><td><code>Record&lt;stirng,any&gt;</code></td><td>否</td><td>请求头</td></tr><tr><td>callback</td><td><code>(res: any) =&gt; void</code></td><td>否</td><td>成功后调用</td></tr><tr><td>errCallback</td><td><code>(res: any) =&gt; void</code></td><td>否</td><td>失败后调用</td></tr><tr><td>apiName</td><td><code>string</code></td><td>是</td><td>移动端网关映射</td></tr></tbody></table><h4 id="示例-23" tabindex="-1"><a class="header-anchor" href="#示例-23" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$ayApi<span class="token punctuation">.</span><span class="token function">api</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
	<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;/test/qwer&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;https://trade.aiyongtech.com&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">apiName</span><span class="token operator">:</span> <span class="token string">&#39;aiyong.test.get&#39;</span>
  <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;请求结果&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="ayapi-apiasync-option" tabindex="-1"><a class="header-anchor" href="#ayapi-apiasync-option" aria-hidden="true">#</a> $ayApi.apiAsync(option)</h3><p>http请求api的异步版</p><blockquote><p>默认所有请求均为POST请求，在移动端使用时请自行添加apiName</p></blockquote><h4 id="参数-20" tabindex="-1"><a class="header-anchor" href="#参数-20" aria-hidden="true">#</a> 参数</h4><p><strong>option</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>method</td><td><code>string</code></td><td>是</td><td>请求URL</td></tr><tr><td>args</td><td><code>Record&lt;stirng,any&gt;</code></td><td>否</td><td>请求参数</td></tr><tr><td>mode</td><td><code>jsonp</code> 或 <code>post </code></td><td>否</td><td>请求类型</td></tr><tr><td>host</td><td><code>string</code></td><td>否</td><td>服务器地址</td></tr><tr><td>headers</td><td><code>Record&lt;stirng,any&gt;</code></td><td>否</td><td>请求头</td></tr><tr><td>apiName</td><td><code>string</code></td><td>是</td><td>移动端网关映射</td></tr></tbody></table><h4 id="返回值-9" tabindex="-1"><a class="header-anchor" href="#返回值-9" aria-hidden="true">#</a> 返回值</h4><blockquote><p>Promise&lt; T &gt;</p></blockquote><p>接口请求成功时，promise会被reslove，请求失败时，会被reject</p><h4 id="示例-24" tabindex="-1"><a class="header-anchor" href="#示例-24" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$ayApi<span class="token punctuation">.</span><span class="token function">apiAsync</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;接口请求成功啦&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;接口请求失败啦&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="adsensorsbeacon" tabindex="-1"><a class="header-anchor" href="#adsensorsbeacon" aria-hidden="true">#</a> $adSensorsBeacon</h3><p>针对爱用广告系统的埋点</p><h3 id="adsensorsbeacon-adviewbeacon-addata-pid" tabindex="-1"><a class="header-anchor" href="#adsensorsbeacon-adviewbeacon-addata-pid" aria-hidden="true">#</a> $adSensorsBeacon.adViewBeacon(adData,pid)</h3><p>广告浏览埋点</p><blockquote><p>请在每个广告展示时调用此方法</p></blockquote><h4 id="参数-21" tabindex="-1"><a class="header-anchor" href="#参数-21" aria-hidden="true">#</a> 参数</h4><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>adData</td><td><code>T</code></td><td>是</td><td>对应广告数据</td></tr><tr><td>Pid</td><td><code>number</code></td><td>是</td><td>广告pid</td></tr></tbody></table><h3 id="adsensorsbeacon-adordernowbeacon-addata-btntext-pid" tabindex="-1"><a class="header-anchor" href="#adsensorsbeacon-adordernowbeacon-addata-btntext-pid" aria-hidden="true">#</a> $adSensorsBeacon.adOrderNowBeacon(adData,btnText,pid)</h3><p>广告点击埋点</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>adData</td><td><code>T</code></td><td>是</td><td>对应广告数据</td></tr><tr><td>btnText</td><td><code>string</code></td><td>是</td><td>按钮文字</td></tr><tr><td>pid</td><td><code>number</code></td><td>是</td><td>广告pid</td></tr></tbody></table><h3 id="adimport" tabindex="-1"><a class="header-anchor" href="#adimport" aria-hidden="true">#</a> $adImport</h3><p>针对广告系统中运行的naruse所注入的广告信息</p><blockquote><p>仅限广告系统内部使用</p></blockquote><h3 id="adimport-addata" tabindex="-1"><a class="header-anchor" href="#adimport-addata" aria-hidden="true">#</a> $adImport.adData</h3><p>广告接口信息，广告接口请求到的数据均在里面</p><p>adData大概是一个如下JSON的一个JS对象</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">adData</span> <span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;offline&quot;</span><span class="token punctuation">,</span>
    open_id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    results<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            creative_name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
            dest_url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
            pid<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
            img_size<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
            secondary_class<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
            creative_id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
            primary_class<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
            user_define<span class="token operator">:</span> <span class="token punctuation">{</span>
                id<span class="token operator">:</span> <span class="token string">&quot;templateDefine&quot;</span><span class="token punctuation">,</span>
                title<span class="token operator">:</span> <span class="token string">&quot;自定义模板&quot;</span><span class="token punctuation">,</span>
                body<span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token doc-comment comment">/** 加载的代码 */</span>
                    code<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
                    <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            group_id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
            img_path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
            creative_type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
            pid_name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
            plan_id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">&quot;200&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;500&quot;</span><span class="token punctuation">,</span>
    total_num<span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">,</span>
    createTime<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="adimport-callback-isblock" tabindex="-1"><a class="header-anchor" href="#adimport-callback-isblock" aria-hidden="true">#</a> $adImport.callback(isBlock)</h3><blockquote><p>仅限拥有阻塞权限的pid</p></blockquote><p>当一个广告的pid触发方式为阻塞时，当广告组件完成所对应的动作时，调用此方法传入一个布尔值是否让正在阻塞的动作继续。</p><h4 id="参数-22" tabindex="-1"><a class="header-anchor" href="#参数-22" aria-hidden="true">#</a> 参数</h4><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>isBlock</td><td><code>boolean</code></td><td>是</td><td>是否继续阻塞动作</td></tr></tbody></table><h3 id="uninstall" tabindex="-1"><a class="header-anchor" href="#uninstall" aria-hidden="true">#</a> $uninstall()</h3><blockquote><p>仅限广告系统内部使用</p></blockquote><p>卸载已经装载的naruse组件。</p><p>建议在关闭广告后就卸载广告组件。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1196768261@qq.com">SHIROHA</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/naruse-doc/docs/dist/%E7%BB%84%E4%BB%B6%E5%BA%93.html" class="" aria-label="组件库"><!--[--><!--]--> 组件库 <!--[--><!--]--></a></span><span class="next"><a href="/naruse-doc/docs/dist/best%20practice.html" class="" aria-label="最佳实践"><!--[--><!--]--> 最佳实践 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/naruse-doc/docs/dist/assets/app.4c4dae04.js" defer></script>
  </body>
</html>
